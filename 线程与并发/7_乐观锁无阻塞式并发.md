#乐观锁


###CAS与volatile
CAS是compare and set/swap，它必须是原子操作的【即方法内语句必须对应的是一条CPU指令，底层是lock cmpxchg指令，保证了原子性】
使用：通过while(true)循环中不断拿取当前值prev，计算结果值res，调用CAS比较prev与此时的当前值是否相同，相同则赋值并返回true，后面break；
    不同则返回false，下次继续拿取当前值prev，计算结果值res，调用CAS。
    核心就在于CAS比较和赋值是原子的。
CAS操作需要volatile支持，以保证变量的可见性，因为CAS需要拿到主存最新的值来比较
效率分析：
    CAS在线程数小于CPU核心数时，效果最好，多于的时候会因为争抢CPU时间片而会发生上下文切换
    synchronized由于加锁，会造成阻塞，也会有上下文切换。
    因此，在线程数小于CPU核心数时，CAS相当优秀，当线程数远大于CPU核心数时，效果不明显。


###原子整数


###原子引用


###原子累加器


###Unsafe类